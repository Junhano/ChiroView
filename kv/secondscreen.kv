#:import utils kivy.utils
#:import languageDict1 languageDict.LanguageDict






<SecondScreen>:
	image_change: modifyimage
	MDFloatLayout:
	
		GridLayout:
			rows:1 
			canvas:
				Color:
					rgb:utils.get_color_from_hex("#67697C")
				Rectangle:
					size: self.size
					pos:self.pos
			pos_hint: {"top": 1}
			size_hint:1,0.1
		

		RotationImage:
			source:app.image_source
			angle: -90 if not app.default_image else 0
			pos_hint: {"top": 0.9, "x": 0.1}
			size_hint: 0.8, 0.7
			id: modifyimage

			
		MyButton:
			pos_hint: {"top": 0.97, "x": 0.22}
			size_hint: 0.28, 0.06
			text: languageDict1.langDict["ClearAllCanvas"][app.state]
			padding: dp(12), dp(12)
			font_size: self.height * 0.5
			on_release: 
				app.confirm_remove_setting(app.action, "ConfirmRemoveMessage") if not app.default_image else app.errorDialog('CantClearCanvasWhenNoPicture')

		MyButton:
			pos_hint: {"top": 0.97, "x": 0.52}
			size_hint:0.28,0.06
			text: languageDict1.langDict["Clear"][app.state]
			padding: dp(12),dp(12)
			font_size: self.height * 0.5
			on_release:
				app.clean_image(modifyimage) if not app.default_image else app.errorDialog('CannotClearLine')

		MyButton:
			pos_hint:{"top": 0.97, "x": 0.84}
			size_hint: 0.14, 0.06
			text: languageDict1.langDict["Save"][app.state]
			on_release:
				print('safe') if not app.default_image else app.errorDialog('CannotSaveImage')
			

		InvisbleButton: 
			pos_hint: {"top": 0.19, "x": 0.2}
			size_hint: 0.25, 0.1
			text: languageDict1.langDict["Draw"][app.state]
			font_size: self.height * 0.7
			on_release:
				app.line_draw_setting() if not app.default_image else app.HelperDialogWhenNoImage()
				

	
		InvisbleButton:
			pos_hint: {"top":0.19, "x": 0.6}
			size_hint: 0.25, 0.1
			text: languageDict1.langDict["Rotate"][app.state]
			font_size: self.height * 0.7
			on_release:
				if not app.default_image: root.image_change.angle -= app.rotateDegree 
				if app.default_image: app.errorDialog('CannotRotateDefaultImage')		
		
		
		
		GridLayout:
			rows: 1			
			canvas:
				Color:
					rgb:utils.get_color_from_hex("#67697C")
				Rectangle:
					size: self.size
					pos:self.pos
			pos_hint: {"top": 0.1}
			size_hint:1,0.1

			ImageButton:
				source:"icons/home.png"
				on_release:
					app.change_screen("home_screen")
			ImageButton:
				source:"icons/OpenGalleryButton.png"
				on_release:
					app.change_screen("third_screen")
			ImageButton:
				source: "icons/photoshopButton.png"
				on_release:
					app.change_screen("second_screen") if app.mode == 0 else app.change_screen("second_screen_b")
