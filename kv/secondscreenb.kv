#:import utils kivy.utils
#:import languageDict1 languageDict.LanguageDict



<Image>:
	angle: 0
	canvas.before:
		PushMatrix
		Rotate:
			angle: root.angle
			axis: 0, 0, 1
			origin: root.center
	canvas.after:
		PopMatrix



<SecondScreenB>:
	image_change: modifyimage
	FloatLayout:
		canvas:
			Color:
				rgb: utils.get_color_from_hex("#D8B5AE")
			Rectangle:
				size: self.size
				pos: self.pos
		
		GridLayout:
			rows:1 
			canvas:
				Color:
					rgb:utils.get_color_from_hex("#67697C")
				Rectangle:
					size: self.size
					pos:self.pos
			pos_hint: {"top": 1}
			size_hint:1,0.1

		

		Image:
			source:"icons/no-camera.png"
			default_image: True
			angle: -90 if self.width > self.height and not self.default_image else 0
			pos_hint: {"top": 0.9, "x": 0.1}
			size_hint: 0.8, 0.55
			id: modifyimage

			
		MyButton:
			pos_hint: {"top": 0.97, "x": 0.22}
			size_hint: 0.28, 0.06
			text: languageDict1.langDict["ClearAllCanvas"][app.state]
			on_release: 
				app.clear_all(modifyimage)

		MyButton:
			pos_hint: {"top": 0.97, "x": 0.52}
			size_hint: 0.28, 0.06
			text: languageDict1.langDict["Clear"][app.state]
			on_release:
				app.clean_image(modifyimage)

		MyButton:
			pos_hint:{"top": 0.97, "x": 0.84}
			size_hint: 0.14, 0.06
			text: languageDict1.langDict["Save"][app.state]
			on_release:
				print(modifyimage.default_image)
		
		
		

		InvisbleButton: 
			pos_hint: {"top": 0.19, "x": 0.2}
			size_hint: 0.2, 0.07
			text: languageDict1.langDict["Points"][app.state]
			on_release:
				app.AnalysisWithPoints()				

	
		InvisbleButton:
			pos_hint: {"top":0.19, "x": 0.6}
			size_hint: 0.2, 0.07
			text: languageDict1.langDict["Rotate"][app.state]
			on_release:
				if not root.image_change.default_image: root.image_change.angle -= 90		
		
		

		
		
		
		GridLayout:
			rows: 1			
			canvas:
				Color:
					rgb:utils.get_color_from_hex("#67697C")
				Rectangle:
					size: self.size
					pos:self.pos
			pos_hint: {"top": 0.1}
			size_hint:1,0.1

			ImageButton:
				source:"icons/home.png"
				on_release:
					app.change_screen("home_screen")
			ImageButton:
				source:"icons/OpenGalleryButton.png"
				on_release:
					app.change_screen("third_screen")
			ImageButton:
				source: "icons/photoshopButton.png"
				on_release:
					app.change_screen("second_screen") if app.mode == 0 else app.change_screen("second_screen_b")
